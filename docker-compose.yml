version: '3.8'

services:
  # üõ°Ô∏è Iron Mask Proxy (The Hero)
  proxy:
    build: .
    container_name: iron-mask-proxy
    ports:
      - "3000:3000"
    volumes:
      - ./config.yaml:/app/config.yaml:ro
    environment:
      - RUST_LOG=info
      - TARGET_URL=http://target:80/post
    depends_on:
      - target
    networks:
      - proxy-net

  # üéØ Mock Target (The Victim)
  # ‡πÉ‡∏ä‡πâ httpbin ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô request body ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏î‡∏π‡∏ß‡πà‡∏≤ Mask ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏á
  target:
    image: kennethreitz/httpbin
    container_name: mock-target
    ports:
      - "8080:80"
    networks:
      - proxy-net

networks:
  proxy-net:
    driver: bridge
